<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>BuckleScript</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

    <!-- Optional theme -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css">
    <script src="js/highlight.pack.js"></script>

    <!-- Custom CSS -->
    <link href="css/simple-sidebar.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <div id="wrapper">

        <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
              <p><strong><a href="index.html">Home</a></strong></p>
<p><strong><a href="https://bloomberg.github.io/bucklescript/js-demo">Playground</a></strong></p>
<p><strong>Get Started</strong></p>
<ul>
<li><a href="Installation.html">Installation</a></li>
<li><a href="Create-a-simple-example-with-NPM.html">Create a simple example with NPM</a></li>
</ul>
<p><strong>BuckleScript Basics</strong></p>
<ul>
<li><a href="FAQ.html">FAQ</a></li>
<li><a href="https://ocaml.org/">About OCaml</a></li>
<li><a href="Compiler-options.html">Compiler options</a></li>
<li><a href="How-to-adapt-your-build-system.html">How to adapt your build system</a></li>
<li><a href="Extensions-to-OCaml-Language.html">Extensions to OCaml Language</a></li>
<li><a href="Semantic-differences-from-other-backends.html">Semantic differences from other backends</a></li>
<li><a href="JavaScript-target-versions.html">JavaScript target versions</a></li>
</ul>
<p><strong>BuckleScript Overview</strong></p>
<ul>
<li><a href="Compiler-overview.html">Compiler overview</a></li>
</ul>
<p><strong>BuckleScript FFI</strong></p>
<ul>
<li><a href="Runtime-representation.html">Runtime representation</a></li>
<li><a href="Curry-and-Uncurry-functions.html">Curry and Uncurry functions</a></li>
<li><a href="JS-call-OCaml.html">JS call OCaml</a></li>
<li><a href="OCaml-call-JS.html">OCaml call JS</a></li>
<li><a href="Experimental-support-of-typescript.html">Experimental support of typescript</a></li>
<li><a href="Unsupported-IO-primitives.html">Unsupported IO primitives</a></li>
</ul>
<p><strong>Contributions</strong></p>
<ul>
<li><a href="Dev-mode-How-to.html">Dev mode How to</a></li>
<li><a href="Help-move-runtime-functions-from-OCaml-to-Javascript.html">Help move runtime functions from OCaml to Javascript</a></li>
</ul>
<p><strong>Roadmap</strong></p>
<ul>
<li><a href="Roadmap.html">Roadmap</a></li>
</ul>
<p><strong>Comparisons</strong></p>
<ul>
<li><a href="Differences-from-js_of_ocaml.html">Differences from js_of_ocaml</a></li>
</ul>

            </ul>
        </div>
        <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12">
                      <p>BuckleScript leverages the OCaml support for extension with dedicated builtin extensions. Those BuckleScript extensions facilitates the integration of native JavaScript code as well as improve the generated code. </p>
<blockquote>
<p>Note that all those extension will be correctly ignored by the native OCaml compiler.</p>
</blockquote>
<ol>
<li><p>extension <code>bs.raw</code></p>
<p>It can be either <code>[%bs.raw{|  this_is_arbitrary_js_expression |}]</code> or <code>[%%bs.raw{| this is arbitrary_js_statement |}</code></p>
<p>Use cases:
for example if you want to use a JavaScript string, you can write code like this</p>
<pre><code class="lang-OCaml">let x  : string = [%bs.raw{|&quot;\x01\x02&quot;|}]
</code></pre>
<p>which will be compiled into </p>
<pre><code class="lang-js">var x = &quot;\x01\x02&quot;
</code></pre>
<pre><code class="lang-OCaml">[%%bs.raw{|
// Math.imul polyfill
if (!Math.imul){
    Math.imul = function (..) {..}
 }
|}]
</code></pre>
<p>In the expression level, i.e, <code>[%js.raw ...]</code> user can add a type annotation, the compiler would use such type annotation to deduce its arities. for example, the next three versions:</p>
<pre><code class="lang-ocaml">let f = [%bs.raw (&quot;Math.max&quot;  : float -&gt; float -&gt; float) ] 3.0 
let f : float -&gt; float -&gt; float = [%bs.raw &quot;Math.max&quot; ] 3.0
let f = ([%bs.raw &quot;Math.max&quot;] : float -&gt; float -&gt; float ) 3.0
</code></pre>
<p>will be translated into </p>
<pre><code class="lang-js">function f(prim){
  return Math.max(3.0,prim);
}
</code></pre>
<p>Caveat:</p>
<ol>
<li>So far we don&#39;t do any sanity check in the quoted text (syntax check is a long-term goal)</li>
<li>You should not refer symbols in OCaml code, it is not guaranteed that the order is correct.
You should avoid introducing new symbols in the raw code, if needed, use the <code>$$</code> prefix (ie <code>$$your_func_name</code>) </li>
</ol>
</li>
<li><p>extension <code>bs.debugger</code></p>
<p>It can be <code>[%bs.debugger]</code></p>
<p>use case</p>
<pre><code class="lang-ocaml">let f x y = 
   [%bs.debugger];
   x + y
</code></pre>
<p>which will be compiled into </p>
<pre><code class="lang-js">function f (x,y) {
  debugger; // JavaScript developer tools will set an breakpoint and stop here
  x + y;
}
</code></pre>
</li>
</ol>

                    </div>
                </div>
            </div>
        </div>
        <!-- /#page-content-wrapper -->

    </div>
    <!-- /#wrapper -->

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

</body>

</html>
